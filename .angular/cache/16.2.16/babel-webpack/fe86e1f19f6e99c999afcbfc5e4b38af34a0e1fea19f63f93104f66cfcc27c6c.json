{"ast":null,"code":"import { Subject, takeUntil } from 'rxjs';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/contact.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ContactsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"span\", 9);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ContactsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction ContactsComponent_div_7_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"span\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"div\", 14)(16, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ContactsComponent_div_7_tr_17_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const contact_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.handleSendEmail(contact_r5.id));\n    });\n    i0.ɵɵelement(17, \"i\", 16);\n    i0.ɵɵtext(18, \" Send Email \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ContactsComponent_div_7_tr_17_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const contact_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.handleDeleteContact(contact_r5.id));\n    });\n    i0.ɵɵelement(20, \"i\", 18);\n    i0.ɵɵtext(21, \" Delete \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const contact_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(contact_r5.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(contact_r5.contactType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 7, contact_r5.openingDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 9, contact_r5.expirationDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(contact_r5.isExpired ? \"badge bg-danger\" : \"badge bg-success\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", contact_r5.isExpired ? \"Expired\" : \"Active\", \" \");\n  }\n}\nfunction ContactsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"table\", 12)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Product Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Contact Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Opening Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Expiration Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, ContactsComponent_div_7_tr_17_Template, 22, 11, \"tr\", 13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.contacts);\n  }\n}\nfunction ContactsComponent_div_8_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 25)(1, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function ContactsComponent_div_8_li_18_Template_a_click_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const page_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      ctx_r11.onPageChange(page_r10);\n      return i0.ɵɵresetView($event.preventDefault());\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const page_r10 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r9.currentPage === page_r10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(page_r10);\n  }\n}\nconst _c0 = function () {\n  return [1, 2, 3, 4, 5];\n};\nfunction ContactsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"label\", 21);\n    i0.ɵɵtext(3, \"Items per page:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 22);\n    i0.ɵɵlistener(\"ngModelChange\", function ContactsComponent_div_8_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.pageSize = $event);\n    })(\"change\", function ContactsComponent_div_8_Template_select_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.onPageSizeChange($event.target.value));\n    });\n    i0.ɵɵelementStart(5, \"option\", 23);\n    i0.ɵɵtext(6, \"10\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 23);\n    i0.ɵɵtext(8, \"25\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 23);\n    i0.ɵɵtext(10, \"50\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 23);\n    i0.ɵɵtext(12, \"100\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"nav\")(14, \"ul\", 24)(15, \"li\", 25)(16, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function ContactsComponent_div_8_Template_a_click_16_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      ctx_r16.onPageChange(ctx_r16.currentPage - 1);\n      return i0.ɵɵresetView($event.preventDefault());\n    });\n    i0.ɵɵtext(17, \"Previous\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(18, ContactsComponent_div_8_li_18_Template, 3, 3, \"li\", 27);\n    i0.ɵɵelementStart(19, \"li\", 25)(20, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function ContactsComponent_div_8_Template_a_click_20_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      ctx_r17.onPageChange(ctx_r17.currentPage + 1);\n      return i0.ɵɵresetView($event.preventDefault());\n    });\n    i0.ɵɵtext(21, \"Next\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", 10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", 25);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", 50);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", 100);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"disabled\", ctx_r3.currentPage === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(10, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"disabled\", ctx_r3.currentPage === 5);\n  }\n}\nexport let ContactsComponent = /*#__PURE__*/(() => {\n  class ContactsComponent {\n    constructor(contactService) {\n      this.contactService = contactService;\n      this.contacts = [];\n      this.loading = false;\n      this.error = null;\n      this.currentPage = 1;\n      this.pageSize = environment.defaultPageSize;\n      this.totalItems = 0;\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.loadContacts();\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    loadContacts() {\n      this.loading = true;\n      this.error = null;\n      this.contactService.getContacts(this.currentPage, this.pageSize).pipe(takeUntil(this.destroy$)).subscribe({\n        next: data => {\n          this.contacts = data;\n          this.loading = false;\n        },\n        error: error => {\n          this.error = error.message;\n          this.loading = false;\n        }\n      });\n    }\n    onPageChange(page) {\n      this.currentPage = page;\n      this.loadContacts();\n    }\n    onPageSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.currentPage = 1;\n      this.loadContacts();\n    }\n    handleSendEmail(contactId) {\n      this.loading = true;\n      this.error = null;\n      this.contactService.sendEmail(contactId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.loading = false;\n          // Show success message\n        },\n\n        error: error => {\n          this.error = error.message;\n          this.loading = false;\n        }\n      });\n    }\n    handleDeleteContact(contactId) {\n      if (confirm('Are you sure you want to delete this contact?')) {\n        this.loading = true;\n        this.error = null;\n        this.contactService.deleteContact(contactId).pipe(takeUntil(this.destroy$)).subscribe({\n          next: () => {\n            this.loading = false;\n            this.loadContacts(); // Reload the list\n          },\n\n          error: error => {\n            this.error = error.message;\n            this.loading = false;\n          }\n        });\n      }\n    }\n    static #_ = this.ɵfac = function ContactsComponent_Factory(t) {\n      return new (t || ContactsComponent)(i0.ɵɵdirectiveInject(i1.ContactService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ContactsComponent,\n      selectors: [[\"app-contacts\"]],\n      decls: 9,\n      vars: 4,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"row\"], [1, \"col-12\"], [\"class\", \"text-center my-4\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-between align-items-center mt-4\", 4, \"ngIf\"], [1, \"text-center\", \"my-4\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn-group\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", 3, \"click\"], [1, \"fas\", \"fa-envelope\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mt-4\"], [1, \"d-flex\", \"align-items-center\"], [1, \"me-2\"], [1, \"form-select\", \"form-select-sm\", 2, \"width\", \"auto\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\"], [1, \"pagination\", \"mb-0\"], [1, \"page-item\"], [\"href\", \"#\", 1, \"page-link\", 3, \"click\"], [\"class\", \"page-item\", 3, \"active\", 4, \"ngFor\", \"ngForOf\"]],\n      template: function ContactsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\");\n          i0.ɵɵtext(4, \"Contacts\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, ContactsComponent_div_5_Template, 4, 0, \"div\", 3);\n          i0.ɵɵtemplate(6, ContactsComponent_div_6_Template, 2, 1, \"div\", 4);\n          i0.ɵɵtemplate(7, ContactsComponent_div_7_Template, 18, 1, \"div\", 5);\n          i0.ɵɵtemplate(8, ContactsComponent_div_8_Template, 22, 11, \"div\", 6);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i2.DatePipe]\n    });\n  }\n  return ContactsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}